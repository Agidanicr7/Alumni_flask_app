{% extends 'base.html' %}

{% block title %}Manage Alumni{% endblock %}

{% block content %}
<div class="section-header mb-4" style="display:flex; justify-content:space-between; align-items:center;">
  <h2>All Alumni</h2>
  <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">
    <i class="fas fa-arrow-left"></i> Back to Dashboard
  </a>
</div>

<div class="table-container">
  <table class="styled-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Grad Year</th>
        <th>Location</th>
        <th>Phone</th>
        <th>Bio</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.fullname }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.graduation_year or '—' }}</td>
        <td>{{ u.location or '—' }}</td>
        <td>{{ u.phone or '—' }}</td>
        <td>{{ u.bio or '—' }}</td>
        <td>
          <div class="action-buttons">
            {% if not u.is_admin %}
            <form method="POST" action="{{ url_for('promote_user', user_id=u.id) }}">
              <button type="submit" class="btn-small btn-success" title="Promote to Admin">
                <i class="fas fa-user-shield"></i> Promote
              </button>
            </form>
            {% else %}
            {% endif %}
            {% if u.id != current_user.id %}
            <form method="POST" action="{{ url_for('delete_user', user_id=u.id) }}"
                  onsubmit="return confirm('Delete {{ u.fullname }}?')">
              <button type="submit" class="btn-small btn-danger" title="Delete User">
                <i class="fas fa-trash"></i> Delete
              </button>
            </form>
            {% endif %}
          </div>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="7" class="text-center text-muted">No alumni found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
